# 生成 MCP Server 客户端接入规则

你正在为 `task-plan-mcp-server` MCP Server 生成客户端接入规则。

## MCP Server 基础信息
- **名称**: task-plan-mcp-server
- **类型**: 任务规划与动态工具规划 MCP Server
- **技术**: Python + ReMe 内存集成
- **传输协议**: SSE (Server-Sent Events)

## Server 提供的工具列表

### 1. 上下文管理工具
**mcp_task_plan_server_create_context**
- 描述: 创建新的规划上下文，用于隔离不同任务的记忆和规划
- 输入参数:
  - `name`: 上下文名称 (必需)
  - `description`: 上下文描述 (必需)
  - `agent`: Agent 信息 (尽量采集agent执行信息)
  - `parent_context_id`: 父上下文 ID (复用类似任务的上下文ID)

**mcp_task_plan_server_query_combined_memory**
- 描述: 查询组合记忆，包括个人记忆和任务记忆
- 输入参数:
  - `context_id`: 上下文 ID (必需)
  - `query`: 查询内容 (必需)

**mcp_task_plan_server_compress_all_history_messages**
- 描述: 压缩历史消息，减少上下文长度
- 输入参数:
  - `context_id`: 上下文 ID (必需)
  - `messages`: 任务待压缩的所有历史消息列表 (必需)
  - `keep_recent_count`: 保留的最近消息数 (默认: 2)
  - `compact_ratio_threshold`: 压缩比例阈值 (默认: 0.75)
  - `max_total_tokens`: 最大 token 数 (默认: 20000)
  - `max_tool_message_tokens`: 工具消息最大 token (默认: 2000)

### 2. 规划反馈工具
**mcp_task_plan_server_save_important_plan_feedback_memory**
- 描述: 保存重要的规划决策和用户反馈
- 输入参数:
  - `context_id`: 上下文 ID (必需)
  - `plan_id`: 规划 ID (必需)
  - `messages`: 对话消息列表 (必需)
  - `metadata`: 元数据 (可选)
  - `plan_id`: 规划 ID (必需)

**mcp_task_plan_server_save_tool_execution_feedback_memory**
- 描述: 保存工具执行结果反馈
- 输入参数:
  - `context_id`: 上下文 ID (必需)
  - `plan_id`: 规划 ID (必需)
  - `execution_feedback`: 执行反馈列表 (必需)
    - 每个反馈包含: tool_name, success, execution_time, error, domain, step_id, input, output, token_cost, create_time

### 3. 动态规划工具
**mcp_task_plan_server_plan_tool_calls**
- 描述: 根据任务需求动态规划工具调用序列
- 输入参数:
  - `context_id`: 上下文 ID (必需)
  - `query`: 用户查询 (必需)
  - `tools`: 可用工具列表 (可选)
  - `tools[].tool_name`: 工具名称
  - `tools[].description`: 工具描述
  - `tools[].domain`: 工具领域
  - `tools[].input`: 输入 schema
  - `tools[].output`: 输出 schema
  - `tools[].args`: 额外参数

## 生成规则要求
请根据以上 MCP Server 信息，为客户端生成完整的 Trae project rules.md 文件，包含:
1. **项目概述**: 简要说明 MCP Server 的用途
2. **工具使用说明**: 详细说明每个工具的用途、参数和使用场景
3. **集成指南**: 最佳实践和使用建议, 示例如下: 
i. 开始任务：创建上下文(尽量采集agent信息并复用类似任务的上下文) → 规划步骤
ii. 执行中：保存决策 → 记录工具反馈
iii. 任务执行完：保存决策 → 记录工具反馈 → 压缩所有历史上下文消息

## 输出格式
1. 在.trae/rules/project_rules.md 输出完整的 project_rules.md 文件内容，使用 Markdown 格式。
2. 尽量排版紧凑，字数不超过500字
